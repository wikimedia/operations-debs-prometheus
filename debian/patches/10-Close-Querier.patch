Description: Cherry-picked patch from upstream to close RestoreForState querier.
 See https://github.com/prometheus/prometheus/pull/4922
--- a/rules/manager.go
+++ b/rules/manager.go
@@ -484,6 +484,7 @@
 		level.Error(g.logger).Log("msg", "Failed to get Querier", "err", err)
 		return
 	}
+	defer q.Close()
 
 	for _, rule := range g.Rules() {
 		alertRule, ok := rule.(*AlertingRule)
